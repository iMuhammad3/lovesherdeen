<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="stylesheet" href="../css/styles.css">
    </head>
    <body>
        <h2><a href="../welcome.html">Go back</a></h2>

        <h2>Memory Game: Match my faces!</h2>
        <div id="game-board" class="board"></div>
        <button id="restart">Play Again ðŸ”„</button>

        <style>
            #restart {
                margin: 20px auto;
                display: block;
                padding: 10px 20px;
                border: none;
                border-radius: 20px;
                cursor: pointer;
                font-size: 16px;
            }

            .board {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
                gap: 12px;
                max-width: 400px;
                margin: 20px auto;
                padding: 10px;
            }

            .card {
                aspect-ratio: 1 / 1;
                background: #ddd;
                border-radius: 12px;
                overflow: hidden;
                cursor: pointer;
                position: relative;
            }

            .card img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                opacity: 0; /* hidden by default */
                transition: opacity 0.3s;
            }

            .card.flipped img {
                opacity: 1; /* only visible when flipped */
            }
        </style>

        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
        <script>
            // 1. List of your image URLs (use your own)
            const images = [
                "images/1.jpg",
                "images/2.png",
                "images/3.jpg",
                "images/4.jpg",
                "images/5.jpg",
                "images/6.jpg",
            ];

            const board = document.getElementById("game-board");
            const restartBtn = document.getElementById("restart");

            let first = null;
            let second = null;
            let lock = false;
            let matched = 0;

            function shuffle(arr) {
                return arr.sort(() => Math.random() - 0.5);
            }

            function startGame() {
                board.innerHTML = "";
                first = null;
                second = null;
                matched = 0;

                const cards = shuffle([...images, ...images]);

                cards.forEach(src => {
                    const card = document.createElement("div");
                    card.className = "card";

                    const img = document.createElement("img");
                    img.src = src;

                    card.appendChild(img);
                    board.appendChild(card);

                    card.addEventListener("click", () => flip(card));
                });
            }

            function flip(card) {
                if (lock) return;
                if (card === first) return;

                card.classList.add("flipped");

                if (!first) {
                    first = card;
                    return;
                }

                second = card;
                lock = true;

                const img1 = first.querySelector("img").src;
                const img2 = second.querySelector("img").src;

                if (img1 === img2) {
                    matched += 2;
                    reset();

                    if (matched === images.length * 2) {
                        setTimeout(() => celebrate(), 300);
                    }
                } else {
                    setTimeout(() => {
                        first.classList.remove("flipped");
                        second.classList.remove("flipped");
                        reset();
                    }, 800);
                }
            }

            function reset() {
                [first, second, lock] = [null, null, false];
            }

            restartBtn.addEventListener("click", startGame);

            startGame();
            function celebrate() {
                confetti({
                    particleCount: 120,
                    spread: 60,
                    origin: { y: 0.6 },
                });

                setTimeout(() => {
                    confetti({
                        particleCount: 120,
                        spread: 100,
                        origin: { y: 0.4 },
                    });
                }, 400);
            }
        </script>
    <script src="../js/bg.js"></script>

    </body>
</html>
